# Apache APISIX Configuration for FinOptiAgents Platform

apisix:
  node_listen: 9080              # APISIX listening port
  enable_admin: true
  enable_admin_cors: true
  admin_key:
    - name: "admin"
      key: "finopti-admin-key"   # API key for admin operations
      role: admin

deployment:
  role: traditional
  role_traditional:
    config_provider: etcd

  admin:
    admin_listen:
      ip: 0.0.0.0
      port: 9180

  etcd:
    host:
      - "http://etcd:2379"       # Etcd connection
    prefix: "/apisix"
    timeout: 30

plugin_attr:
  prometheus:
    export_addr:
      ip: "0.0.0.0"
      port: 9091

# Enable plugins for observability
plugins:
  - prometheus
  - http-logger
  - request-id
  - cors

# CORS configuration for frontend access
cors:
  allow_origins: "*"
  allow_methods: "GET,POST,PUT,DELETE,OPTIONS"
  allow_headers: "*"
  expose_headers: "*"
  max_age: 3600
  allow_credential: true
