
======================================================================
ğŸ§ª ADK PLUGIN DEPLOYMENT - COMPREHENSIVE TEST SUITE
======================================================================

Testing:
  âœ“ Reflect-and-Retry Plugin
  âœ“ BigQuery Agent Analytics Plugin
  âœ“ Event Logging & Observability

======================================================================
  Phase 1: Plugin Loading Verification
======================================================================

ğŸ” Test 1.1: Orchestrator Health & Plugin Status
   Status: healthy
   Service: orchestrator_adk

ğŸ” Test 1.2: GCloud Agent Health & Plugin Status
   âŒ Error: HTTPConnectionPool(host='localhost', port=15001): Max retries exceeded with url: /health (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x102c43b60>: Failed to establish a new connection: [Errno 61] Connection refused'))

ğŸ” Test 1.3: Monitoring Agent Health & Plugin Status
   âŒ Error: HTTPConnectionPool(host='localhost', port=15002): Max retries exceeded with url: /health (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x102c6c3e0>: Failed to establish a new connection: [Errno 61] Connection refused'))

======================================================================
  Phase 2: BigQuery Analytics Plugin
======================================================================

ğŸ” Test 2.1: BigQuery Dataset Exists
   âœ… Dataset 'agent_analytics' found

ğŸ” Test 2.2: BigQuery Table Exists
   âœ… Table 'agent_events_v2' exists or will be auto-created

ğŸ” Test 2.3: Query BigQuery for Agent Events
   âŒ Query failed: 

======================================================================
  Phase 3: Event Logging Test
======================================================================

ğŸ” Test 3.1: Trigger Agent Request to Generate Events
   Sending test prompt to orchestrator...
   âœ… Request processed (Status: 403)

   Waiting 5 seconds for events to propagate to BigQuery...

ğŸ” Test 3.2: Verify Events Logged to BigQuery
   âŒ Query failed: 

======================================================================
  Phase 4: Plugin Configuration Verification
======================================================================

ğŸ” Test 4.1: Verify Environment Variables
   âœ… BQ_ANALYTICS_ENABLED=true
   âœ… GOOGLE_CLOUD_PROJECT=vector-search-poc
   âœ… BQ_ANALYTICS_DATASET=agent_analytics

======================================================================
PLUGIN TEST SUMMARY
======================================================================
âœ… PASS - Orchestrator Health
          Service: orchestrator_adk
âŒ FAIL - GCloud Agent Health
          HTTPConnectionPool(host='localhost', port=15001): Max retries exceeded with url: /health (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x102c43b60>: Failed to establish a new connection: [Errno 61] Connection refused'))
âŒ FAIL - Monitoring Agent Health
          HTTPConnectionPool(host='localhost', port=15002): Max retries exceeded with url: /health (Caused by NewConnectionError('<urllib3.connection.HTTPConnection object at 0x102c6c3e0>: Failed to establish a new connection: [Errno 61] Connection refused'))
âœ… PASS - BigQuery Dataset
          Dataset: agent_analytics
âœ… PASS - BigQuery Table
          Table: agent_events_v2
âŒ FAIL - BigQuery Analytics Query
          Query failed
âœ… PASS - Agent Request
          Status: 403
âŒ FAIL - Event Logging
          Query failed
âœ… PASS - Plugin Environment Config
          All env vars present

Total: 5/9 tests passed

âŒ 4 test(s) failed
